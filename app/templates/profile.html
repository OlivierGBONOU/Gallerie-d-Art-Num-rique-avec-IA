<!-- app/templates/profile.html -->
{% extends "base.html" %}

{% block title %}Profil de {{ user.username }}{% endblock %}

{% block content %}
    <h1 class="my-4">Profil de {{ user.username }}</h1>
    <p><strong>Email :</strong> {{ user.email }}</p>
    <p><strong>Bio :</strong> {{ user.bio or 'Aucune bio définie.' }}</p>
    {% if user.avatar %}
        <img src="{{ url_for('static', filename='uploads/' + user.avatar) }}" class="profile-avatar" alt="Avatar">
    {% endif %}
    <a href="{{ url_for('user.edit_profile') }}" class="btn btn-warning mb-4">Modifier le profil</a>
    <a href="{{ url_for('user.upload') }}" class="btn btn-primary mb-4">Ajouter une œuvre</a>

    <h2 class="my-4">Mes œuvres</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4 artworks-grid">
        {% for artwork in artworks %}
            <div class="col artwork-card">
                <div class="card h-100">
                    <img src="{{ url_for('static', filename='uploads/' + artwork.image_path) }}" class="card-img-top" alt="{{ artwork.title }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ artwork.title }}</h5>
                        <a href="{{ url_for('main.artwork', artwork_id=artwork.id) }}" class="btn btn-primary">Voir plus</a>
                        <a href="{{ url_for('user.edit', artwork_id=artwork.id) }}" class="btn btn-warning">Modifier</a>
                        <form method="POST" action="{{ url_for('user.delete', artwork_id=artwork.id) }}" class="d-inline">
                            {{ form.hidden_tag() }}
                            <button type="submit" class="btn btn-danger" onclick="return confirm('Voulez-vous vraiment supprimer cette œuvre ?')">Supprimer</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}